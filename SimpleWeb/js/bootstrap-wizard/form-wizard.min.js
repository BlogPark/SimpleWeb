var FormWizard = function () {
    return {
        init: function () {
            if (jQuery().bootstrapWizard) {                
                var e = $("#wizForm"),
                t = $(".alert-success", e),
                n = $(".alert-danger", e);
                e.validate({
                    doNotHideMessage: !0,
                    errorClass: "error-span",
                    errorElement: "span",
                    rules: {
                        "member.Email": {
                            required: !0,
                            email: !0
                        },
                        "member.TruethName": {
                            required: !0
                        },
                        "member.MobileNum": {
                            minlength: 11,
                            required: !0
                        },
                        "member.WeixinNum": {
                            required: !0
                        },
                        "member.AliPayName": {
                            required: !0
                        },
                        "member.AliPayNum": {
                            required: !0
                        }
                        //"drparea": {
                        //    min:1,
                        //    required: !0
                        //},
                        //"drpcity": {
                        //    min: 1,
                        //    required: !0
                        //},
                        //"drpprovince": {
                        //    min: 1,
                        //    required: !0
                        //}
                    },
                    invalidHandler: function () {
                        t.hide(),
                        n.show()
                    },
                    highlight: function (e) {
                        $(e).closest(".form-group").removeClass("has-success").addClass("has-error")
                    },
                    unhighlight: function (e) {
                        $(e).closest(".form-group").removeClass("has-error")
                    },
                    success: function (e) {
                        "gender" == e.attr("for") ? (e.closest(".form-group").removeClass("has-error").addClass("has-success"), e.remove()) : e.addClass("valid").closest(".form-group").removeClass("has-error").addClass("has-success")
                    },
                    messages: {
                        "member.MobileNum": "请输入手机号",
                        "member.WeixinNum": "请输入微信号",
                        "member.TruethName": {
                            required: "请输入真实姓名"
                        },
                        "member.Email": "请输入一个正确的邮箱",
                        "member.AliPayName": "请输入支付宝账号",
                        "member.AliPayNum": "请输入支付宝ID"
                        //"drparea": "请选择区域",
                        //"drpcity": "请选择城市",
                        //"drpprovince": "请选择省份"
                    }
                }),
                $("#formWizard").bootstrapWizard({
                    nextSelector: ".nextBtn",
                    previousSelector: ".prevBtn",
                    onNext: function (o, a, i) {
                        if (t.hide(), n.hide(), 0 == e.valid()) return !1;
                        var r = a.find("li").length,
                        s = i + 1;
                        $(".stepHeader", $("#formWizard")).text("Step " + (i + 1) + " of " + r),
                        jQuery("li", $("#formWizard")).removeClass("done");
                        for (var l = a.find("li"), d = 0; i > d; d++) jQuery(l[d]).addClass("done");
                        1 == s ? $("#formWizard").find(".prevBtn").hide() : $("#formWizard").find(".prevBtn").show(),
                        s >= r ? ($("#formWizard").find(".nextBtn").hide(), $("#formWizard").find(".submitBtn").show()) : ($("#formWizard").find(".nextBtn").show(), $("#formWizard").find(".submitBtn").hide())
                    },
                    onPrevious: function (e, o, a) {
                        t.hide(),
                        n.hide();
                        var i = o.find("li").length,
                        r = a + 1;
                        $(".stepHeader", $("#formWizard")).text("Step " + (a + 1) + " of " + i),
                        jQuery("li", $("#formWizard")).removeClass("done");
                        for (var s = o.find("li"), l = 0; a > l; l++) jQuery(s[l]).addClass("done");
                        1 == r ? $("#formWizard").find(".prevBtn").hide() : $("#formWizard").find(".prevBtn").show(),
                        r >= i ? ($("#formWizard").find(".nextBtn").hide(), $("#formWizard").find(".submitBtn").show()) : ($("#formWizard").find(".nextBtn").show(), $("#formWizard").find(".submitBtn").hide())
                    },
                    onTabClick: function () {
                        return false,
                        !1
                    },
                    onTabShow: function (e, t, n) {
                        var o = t.find("li").length,
                        a = n + 1,
                        i = 100 * (a / o);
                        $("#formWizard").find(".progress-bar").css({
                            width: i + "%"
                        })
                    }
                }),
                $("#formWizard").find(".prevBtn").hide(),
                $("#formWizard .submitBtn").click(function () {
                    
                    ////提交表单                    
                    //document.getElementById("wizForm").submit();
                }).hide()
            }
        }
    }
}();